digraph ir_state {
    rankdir=TB;

    node [shape = circle, label="IDLE (0)",        fontsize=12] IDLE;
    node [shape = circle, label="RECVING (1)",     fontsize=12] RECVING;
    node [shape = circle, label="RECVED (2)",      fontsize=12] RECVED;
    node [shape = circle, label="XMITTING (3)",    fontsize=12] XMITTING;
    node [shape = circle, label="RECVED_IDLE (4)", fontsize=12] RECVED_IDLE;

    node [shape = point ]; START

    START -> IDLE [ label = "Initialize" ];

    IDLE -> IDLE     [ label = "Overflow continues" ];
    IDLE -> RECVING  [ label = "Falling edge" ];
    IDLE -> XMITTING [ label = "IR_xmit called" ];

    RECVING -> RECVED [ label = "Overflowed" ];
    RECVING -> RECVED [ label = "Trailer detected" ];

    RECVED -> RECVED_IDLE [ label = "Updated BLE Adv data" ];

    XMITTING -> IDLE [ label = "All data sent" ];

    RECVED_IDLE -> IDLE [ label = "Any edge" ];
}
